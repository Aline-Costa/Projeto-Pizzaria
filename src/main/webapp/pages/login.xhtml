<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Login</title>
</h:head>
<h:body>
	<f:metadata>
		<f:viewAction action="#{loginBean.iniciar}" />
	</f:metadata>
	<p:growl id="mensagem" />
	<div>
		<p:contentFlow value="#{imagesView.images}" var="image"
			style="background-color: #65122A">
			<p:graphicImage library="images" name="#{image}" styleClass="content" />
			<div class="caption">#{image}</div>
		</p:contentFlow>
		<h:form>

			<p:commandButton value="Login" oncomplete="PF('dialogo3').show();"
				actionListener="#{loginBean.iniciar}">
				<f:actionListener
					type="org.omnifaces.eventlistener.ResetInputAjaxActionListener" />
			</p:commandButton>
			<p:commandButton value="Faça seu Pedido!"
				oncomplete="PF('dialogo2').show();"
				actionListener="#{clienteBean.novo}" update=":formCadastro:painel">
				<f:actionListener
					type="org.omnifaces.eventlistener.ResetInputAjaxActionListener" />
			</p:commandButton>
		</h:form>


		<h2>Cardápios</h2>

		<div id="cardapio"></div>

		<p:dialog header="Login" widgetVar="dialogo" closable="false"
			draggable="false" resizable="false" modal="true">
			<h:form id="formLogin">
				<h:panelGrid columns="2">
					<p:outputLabel for="email" value="E-mail:" />
					<p:inputText id="email" size="20" required="true"
						requiredMessage="O campo E-mail é obrigatório"
						value="#{loginBean.cliente.email}" />

					<p:outputLabel for="senha" value="Senha:" />
					<p:password id="senha" maxlength="8" size="20" required="true"
						requiredMessage="O campo Senha é obrigatório"
						value="#{loginBean.cliente.senha}" />
				</h:panelGrid>

				<h:panelGrid columns="2">
					<p:commandButton value="Entrar" update=":mensagem"
						actionListener="#{loginBean.autenticarCliente}" />
					<p:commandButton value="Cancelar"
						oncomplete="PF('dialogo').hide();" />
				</h:panelGrid>
			</h:form>
		</p:dialog>
		
		<p:dialog header="Login" widgetVar="dialogo3" closable="false"
			draggable="false" resizable="false" modal="true">
			<h:form id="formLoginFunc">
				<h:panelGrid columns="2">
					<p:outputLabel for="email" value="E-mail:" />
					<p:inputText id="email" size="20" required="true"
						requiredMessage="O campo E-mail é obrigatório"
						value="#{loginBean.funcionario.email}" />

					<p:outputLabel for="senha" value="Senha:" />
					<p:password id="senha" maxlength="8" size="20" required="true"
						requiredMessage="O campo Senha é obrigatório"
						value="#{loginBean.funcionario.senha}" />
				</h:panelGrid>

				<h:panelGrid columns="2">
					<p:commandButton value="Entrar" update=":mensagem"
						actionListener="#{loginBean.autenticarFuncionario}" />
					<p:commandButton value="Cancelar"
						oncomplete="PF('dialogo3').hide();" />
				</h:panelGrid>
			</h:form>
		</p:dialog>
		
		<p:dialog header="Cadastre-se para fazer o pedido"
			widgetVar="dialogo2" draggable="false" resizable="false"
			modal="false">
			<h:form id="formCadastro">
				<h:panelGrid id="painel" columns="2">

					<p:outputLabel value="Nome:" />
					<p:inputText maxlength="100" size="30"
						value="#{clienteBean.cliente.nome}" required="true"
						requiredMessage="O campo 'Nome' é obrigatório!" />

					<p:outputLabel value="Rua:" />
					<p:inputText maxlength="50" size="30"
						value="#{clienteBean.cliente.rua}" required="true"
						requiredMessage="O campo 'Rua' é obrigatório!" />

					<p:outputLabel value="Nº da casa:" />
					<p:inputText maxlength="10" size="15"
						value="#{clienteBean.cliente.numCasa}" required="true"
						requiredMessage="O campo 'Nº da casa' é obrigatório!" />

					<p:outputLabel value="Bairro:" />
					<p:inputText maxlength="50" size="30"
						value="#{clienteBean.cliente.bairro}" required="true"
						requiredMessage="O campo 'Bairro' é obrigatório!" />

					<p:outputLabel value="Telefone:" />
					<p:inputMask id="telefone" mask="(99)99999-9999" maxlength="14"
						size="16" value="#{clienteBean.cliente.telefone}" required="true"
						requiredMessage="O campo 'Telefone' é obrigatório!" />

					<p:outputLabel value="E-mail:" />
					<p:inputText maxlength="50" size="30"
						value="#{clienteBean.cliente.email}" required="true"
						requiredMessage="O campo 'E-mail' é obrigatório!" />

					<p:outputLabel value="Senha:" />
					<p:password maxlength="8" size="10"
						value="#{clienteBean.cliente.senha}" required="true"
						requiredMessage="O campo 'Senha' é obrigatório!" />

				</h:panelGrid>

				<h:panelGrid columns="2">
					<p:commandButton value="Salvar"
						actionListener="#{clienteBean.salvar}"
						update=":mensagem :formCadastro:painel " />
					<p:commandButton value="Fechar" oncomplete="PF('dialogo2').hide();" />
				</h:panelGrid>
				
				<h2>Já possui cadastro</h2>
				<p:commandButton value="Login" oncomplete="PF('dialogo').show();"
				actionListener="#{loginBean.iniciar}">

				<f:actionListener
					type="org.omnifaces.eventlistener.ResetInputAjaxActionListener" />
			</p:commandButton>

			</h:form>
		</p:dialog>
	</div>
</h:body>
</html>